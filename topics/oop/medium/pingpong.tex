\begin{blocksection}
\question Let's use OOP to help us implement our good friend, the ping-pong sequence!

As a reminder, the ping-pong sequence counts up starting from 1 and is
always either counting up or counting down.

At element \lstinline{k}, the direction switches if \lstinline{k} is a multiple of 8 or contains the
digit 8.

The first 30 elements of the ping-pong sequence are listed below, with direction
swaps marked using brackets at the 8th, 16th, 18th, 24th, and 28th elements:
\begin{lstlisting}
1 2 3 4 5 6 7 [8] 7 6 5 4 3 2 1 [0] 1 [2] 1 0 -1 -2 -3 [-4] -3 -2 -1 [0] -1 -2
\end{lstlisting}

Assume you have a function \texttt{has\_eight(k)} that returns True if $k$ contains the digit 8.

\vspace{1\baselineskip}
\begin{lstlisting}
>>> tracker1 = PingPongTracker()
>>> tracker2 = PingPongTracker()
>>> tracker1.next()
1
>>> tracker1.next()
2
>>> tracker2.next()
1

class PingPongTracker:
    def __init__(self):






    def next(self):
\end{lstlisting}
\end{blocksection}

\begin{blocksection}
\begin{solution}[0.3in]
\begin{lstlisting}
class PingPongTracker:
    def __init__(self):
        self.current = 0
        self.index = 1
        self.add = True

    def next(self):
        if self.add:
            self.current += 1
        else:
            self.current -= 1
        if has_eight(self.index) or self.index % 8 == 0:
            self.add = not self.add
        self.index += 1
        return self.current

\end{lstlisting}
\end{solution}

\end{blocksection}

\begin{blocksection}
\begin{guide}
\textbf{Teaching Tips}
\begin{itemize}
\item Describe instance independence when going through doctests- why does \lstinline{tracker2} not update when \lstinline{tracker1} updates?
\item Ask students what variables a tracker needs to use and how they should be initialized in \lstinline{__init__}
\item If you have time, compare and contrast the nonlocal vs. object oriented approach
\begin{itemize}
  \item Emphasize how nonlocal and OOP both save the "state" of something, but note the pros/cons of both
\end{itemize}
\item Make sure students don't confuse this \lstinline{next} with the built-in iterator function \lstinline{next}
\end{itemize}
\end{guide}
\end{blocksection}
